{"title":"File Uploader","description":"Upload a file and submit","instructions":"Upload an image task","template":"<!DOCTYPE html>\n<html>\n  <head>\n    <title>File Upload Campaign</title>\n    <meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\">\n    <script src=\"https://bundle.run/buffer@6.0.3\"></script>\n    <script src=\"https://unpkg.com/ipfs-api@26.1.0/dist/index.js\"></script>\n    <link href=\"https://app.effect.network/force-defaults.css\" rel=\"stylesheet\" />\n  </head>\n  <script type=\"text/javascript\">\n    function upload() {\n      const reader = new FileReader();\n      reader.onloadend = async function() {\n        const ipfs = window.IpfsApi({ host: 'ipfs.effect.ai', port: 443, protocol: 'https' }) // Connect to IPFS\n        const buf = buffer.Buffer(reader.result) // Convert data into buffer\n\n      ipfs.files.add(buf, (err, result) => { // Upload buffer to IPFS\n          if(err) {\n            console.error(err)\n            return\n          }\n          console.log('result',result)\n          let url = `https://ipfs.effect.ai/ipfs/${result[0].hash}`\n          console.log(`Url -->`, url)\n          document.getElementById(\"url\").innerHTML= url\n          document.getElementById(\"url\").href= url\n          document.getElementById(\"output\").src = url\n          document.getElementById(\"image_url\").value = url\n          document.getElementById(\"submit-btn\").removeAttribute('disabled')\n        })\n\n      }\n      const photo = document.getElementById(\"photo\");\n      reader.readAsArrayBuffer(photo.files[0]); // Read Provided File\n    }\n  </script>\n  <body>\n    <form action=\"/\">\n      <input type=\"file\" name=\"photo\" id=\"photo\">\n      <input type=\"hidden\" name=\"image_url\" id=\"image_url\">\n      <br>\n      <button type=\"button\" onclick=\"upload()\">Upload</button>\n      <hr>\n      <button id=\"submit-btn\" disabled type=\"submit\">Submit</button>\n      <img>\n    </form>\n    </br>\n    </br>\n    <a id=\"url\" target=\"_blank\"></a>\n    </br>\n    </br>\n    <img id=\"output\">\n  </body>\n</html>\n","image":"","category":"annotations","example_task":{},"version":1,"reward":"2","estimated_time":"10"}